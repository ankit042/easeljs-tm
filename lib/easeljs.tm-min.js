(function(){var t,i,n,r,e={}.hasOwnProperty,s=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};i=function(t,n){var r,e,s;s=[];for(r in n)e=n[r],Object.prototype.hasOwnProperty.call(n,r)&&("[object Object]"===Object.prototype.toString.call(e)?(t[r]={},s.push(i(t[r],e))):s.push(t[r]=e));return s},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(n=module.exports).createjs&&(n.createjs={}),t=module.exports.createjs),i(t,{tm:{}}),t.tm.Bitmap=function(i){function n(i){return i instanceof t.tm.BitmapData?this.initialize(i.canvas):(this.initialize(i),void 0)}return s(n,i),n}(t.Bitmap),t.tm.BitmapData=function(){function i(t,i){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=i,this.ctx=this.canvas.getContext("2d")}var n,r,e,s;return e=t.Stage,n=t.Container,r=t.Shape,s=function(t){return"[object Number]"===Object.prototype.toString.call(t)},i.CHANNEL_RED=parseInt("1000",2),i.CHANNEL_GREEN=parseInt("0100",2),i.CHANNEL_BLUE=parseInt("0010",2),i.CHANNEL_ALPHA=parseInt("0001",2),i.prototype.noise=function(t,i,n,r,e,s,o,h,a){return null==n&&(n=88675123),null==r&&(r=!1),null==e&&(e=0),null==s&&(s=255),null==o&&(o=14),null==h&&(h=!1),null==a&&(a={x:0,y:0}),this._updatePixels(this._noise(t,i,n,r,e,s,o,h,a)),this},i.prototype._noise=function(n,r,e,s,o,h,a,l,u){var c,p,f,g,m,d,w,y,v,_,S,N,b,G,E,B,R,x,C,H,I,A,L,F;for(null==e&&(e=88675123),null==s&&(s=!1),null==o&&(o=0),null==h&&(h=255),null==a&&(a=14),null==l&&(l=!1),L=null!=u?u:{x:0,y:0},C=L.x,I=L.y,x=this.canvas.width,_=this.canvas.height,H=new t.tm.Xor128(e),G=Math.min(o,h),R=Math.abs(o-h),B=(a&i.CHANNEL_RED)/i.CHANNEL_RED,v=(a&i.CHANNEL_GREEN)/i.CHANNEL_GREEN,g=(a&i.CHANNEL_BLUE)/i.CHANNEL_BLUE,p=(a&i.CHANNEL_ALPHA)/i.CHANNEL_ALPHA,m=[],S=0,b=A=0,F=x*_;F>A;b=A+=1)d=C+b%x>>0,w=I+b/x>>0,d=d/n>>0,w=w/r>>0,s&&(d%=x,w%=_),N=w*x+d<<2,E=G+H.at(N++)%R,l?(y=f=E,N+=2):(y=G+H.at(N++)%R,f=G+H.at(N++)%R),c=G+H.at(N++)%R,m[S++]=E*B,m[S++]=y*v,m[S++]=f*g,m[S++]=255-c*p;return m},i.prototype.perlinNoise=function(t,i,n,r,e,s,o,h,a){return null==n&&(n=6),null==r&&(r=88675123),null==e&&(e=!1),null==s&&(s=.5),null==o&&(o=7),null==h&&(h=!1),null==a&&(a=[]),this._updatePixels(this._perlinNoise(t,i,n,r,e,s,o,h,a)),this},i.prototype._perlinNoise=function(i,n,r,e,s,o,h,a,l){var u,c,p,f,g,m,d,w,y,v,_,S,N,b,G,E,B,R,x,C,H,I,A;for(null==r&&(r=6),null==e&&(e=88675123),null==s&&(s=!1),null==o&&(o=.5),null==h&&(h=7),null==a&&(a=!1),null==l&&(l=[]),S=this.canvas.width,f=this.canvas.height,w=[],c=0,g=N=0;r>N;g=N+=1)p=1<<g,u=Math.pow(o,g),w[g]={offset:l[g],frequency:p,amplitude:u,width:i/p,height:n/p},c+=u;for(c=1/c,b=0,B=w.length;B>b;b++)d=w[b],d.amplitude*=c;for(G=0,R=w.length;R>G;G++)d=w[G],v=this._noise(d.width,d.height,e,s,0,255,h,a,d.offset),v=new t.tm.GaussianFilter(d.width,d.height,8).filter(S,f,v),d.pixels=v;for(_=[],E=0,x=w.length;x>E;E++)for(d=w[E],v=d.pixels,u=d.amplitude,m=I=0,C=v.length;C>I;m=++I)y=v[m],_[m]=(_[m]||0)+y*u;for(g=A=0,H=_.length;H>A;g=++A)y=_[g],_[g]=255&y;return _},i.prototype._scale=function(t,i,n){var r,e,s,o,h,a,l,u,c;if(1===i&&1===n)return t.slice();for(h=this.canvas.width,e=this.canvas.height,r=[],s=0,l=u=0;e>u;l=u+=1)for(a=c=0;h>c;a=c+=1)o=h*(l/n>>0)+(a/i>>0)<<2,r[s++]=t[o++],r[s++]=t[o++],r[s++]=t[o++],r[s++]=t[o++];return r},i.prototype._updatePixels=function(t){var i,n,r,e,s,o;for(i=(r=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)).data,n=s=0,o=t.length;o>s;n=++s)e=t[n],i[n]=e;return this.ctx.putImageData(r,0,0)},i}(),t.tm.Graphics=function(i){function n(){return r=n.__super__.constructor.apply(this,arguments)}var e;return s(n,i),e=Math.PI/2,n.getRGB=function(t,i,r,e){return n.__super__.constructor.getRGB.call(this,t>>0,i>>0,r>>0,e)},n.prototype.beginStroke=function(i,r,e,s){return n.__super__.beginStroke.call(this,new t.tm.RGB(i,r,e,s).toCSSString())},n.prototype.beginFill=function(i,r,e,s){return n.__super__.beginFill.call(this,new t.tm.RGB(i,r,e,s).toCSSString())},n.prototype.beginRadialCircularGradientFill=function(i,n,r,s,o,h,a,l,u){var c,p,f,g,m,d;for(p=[],g=[],m=e/r,f=d=0;r>=d;f=d+=1)c=m*f,p[f]=t.tm.HSV.interpolate(i,n,1-Math.cos(c)).toCSSString(),g[f]=Math.sin(c);return this.beginRadialGradientFill(p,g,s,o,h,a,l,u)},n}(t.Graphics),t.tm.HSV=function(){function i(i,n,r,e){var s,o,h,a,l,u,c,p;this.h=i,this.s=n,this.v=r,this.a=null!=e?e:1,1===arguments.length&&(a=i,u=new t.tm.RGB(a),l=u.r/255,h=u.g/255,s=u.b/255,i=n=r=0,c=l>=h?l:h,s>c&&(c=s),p=h>=l?l:h,p>s&&(p=s),r=c,o=c-p,n=0===c?0:o/c,0!==n&&(l===c?i=(h-s)/o:h===c?i=2+(s-l)/o:s===c&&(i=4+(l-h)/o),i=60*i,0>i&&(i+=360)),this.h=i,this.s=n,this.v=r),this.normalize()}return i.interpolate=function(t,n,r){var e,s,o,h,a;for(e=new i,a=["h","s","v","a"],o=0,h=a.length;h>o;o++)s=a[o],e[s]=t[s]+(n[s]-t[s])*r;return e.normalize()},i.prototype.clone=function(){return new i(this.h,this.s,this.v,this.a)},i.prototype.normalize=function(){return this.s=0>this.s?0:this.s>1?1:this.s,this.v=0>this.v?0:this.v>1?1:this.v,this.h=this.h%360,0>this.h&&(this.h+=360),this.a=this.a>1?1:0>this.a?0:this.a,this},i.prototype.toRGB=function(){var i,n,r,e,s,o,h,a;switch(this.normalize(),n=this.h,e=this.s,s=this.v,i=this.a,n/=60,r=n>>0,o=s*(1-e),h=s*(1-e*(n-1)),a=s*(1-e*(1-n+r)),o=255*o>>0,h=255*h>>0,a=255*a>>0,s=255*s>>0,r){case 0:return new t.tm.RGB(s,a,o,i);case 1:return new t.tm.RGB(h,s,o,i);case 2:return new t.tm.RGB(o,s,a,i);case 3:return new t.tm.RGB(o,h,s,i);case 4:return new t.tm.RGB(a,o,s,i);case 5:return new t.tm.RGB(s,o,h,i)}},i.prototype.toHex=function(){return this.toRGB().toHex()},i.prototype.toString=function(){return"[HSV] "+this.h+", "+this.s+", "+this.v+", "+this.a},i.prototype.toCSSString=function(){return this.toRGB().toCSSString()},i}(),t.tm.KernelFilter=function(i){function n(t,i,n){this.radiusX=t,this.radiusY=i,this.kernel=n}var r;return s(n,i),r=t.Rectangle,n.prototype.getBounds=function(){return new r(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},n.prototype.applyFilter=function(t,i,n,r,e,s,o,h){var a,l,u,c;return null==s&&(s=t),null==o&&(o=i),null==h&&(h=n),a=t.getImageData(i,n,r,e),l=a.data,u=s.createImageData(r,e),c=u.data,this.filter(r,e,l,c),s.putImageData(u,o,h),!0},n.prototype.filter=function(t,i,n,r){var e,s,o,h,a,l,u,c,p,f,g,m,d,w,y,v,_,S,N,b,G;for(null==r&&(r=[]),a=this.kernel,d=this.radiusX-1,w=this.radiusY-1,l=d+this.radiusX,o=S=0,G=t*i;G>S;o=S+=1){for(v=o%t,_=o/t>>0,m=s=e=0,h=N=0,b=a.length;b>N;h=N+=1)y=a[h],u=h%l,c=h/l>>0,f=v-d+u,f=0>f?0:f>t-1?t-1:f,g=_-w+c,g=0>g?0:g>i-1?i-1:g,p=t*g+f<<2,m+=n[p]*y,s+=n[++p]*y,e+=n[++p]*y;p=t*_+v<<2,r[p]=255&m,r[++p]=255&s,r[++p]=255&e,r[++p]=n[p]}return r},n.prototype.clone=function(){return new n(this.radiusX,this.radiusY,this.kernel)},n.prototype.toString=function(){return"[KernelFilter]"},n}(t.Filter),t.tm.GaussianFilter=function(t){function i(t,n,r){var e,s,o,h,a,l,u,c,p,f,g,m,d,w,y,v,_,S,N,b,G,E,B,R,x,C,H,I,A,L;if(null==t&&(t=2),null==n&&(n=2),f=0,h=[],null!=r)for(p=2*r*r,_=S=I=1-n;n>S;_=S+=1)for(v=N=A=1-t;t>N;v=N+=1)g=1/(p*Math.PI)*Math.exp(-(v*v+_*_)/p),f+=g,h.push(g);else{for(u=[],l=b=0,L=2*Math.max(t,n)-1;L>=0?L>b:b>L;l=L>=0?++b:--b)for(u[l]=e=[],c=u[l-1],a=l+1,o=G=0;a>=0?a>G:G>a;o=a>=0?++G:--G)e[o]=0===o||o===a-1?1:c[o-1]+c[o];for(d=u[2*(t-1)],y=u[2*(n-1)],x=0,E=y.length;E>x;x++)for(w=y[x],C=0,B=d.length;B>C;C++)m=d[C],g=m*w,f+=g,h.push(g)}for(s=H=0,R=h.length;R>H;s=++H)g=h[s],h[s]/=f;i.__super__.constructor.call(this,t,n,h)}return s(i,t),i.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},i.prototype.toString=function(){return"[GaussianBlurFilter]"},i}(t.tm.KernelFilter),t.tm.RGB=function(){function t(t,i,n,r){var e;if(isNaN(+t))if(e=t.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/))this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16),this.a=null!=i?i:1;else if(e=t.match(/#([0-9a-f])([0-9a-f])([0-9a-f])/))this.r=parseInt(""+e[1]+e[1],16),this.g=parseInt(""+e[2]+e[2],16),this.b=parseInt(""+e[3]+e[3],16),this.a=null!=i?i:1;else if(e=t.match(/rgba\(\s*(\S+?)\s*,\s*(\S+?)\s*,\s*(\S+?)\s*,\s*(\S+?)\s*\)/))this.r=+e[1],this.g=+e[2],this.b=+e[3],this.a=+e[4];else{if(!(e=t.match(/rgb\(\s*(\S+?)\s*,\s*(\S+?)\s*,\s*(\S+?)\s*\)/)))throw new TypeError("Invalid color string");this.r=+e[1],this.g=+e[2],this.b=+e[3],this.a=1}else if(null!=t&&null!=i&&null!=n)this.r=t,this.g=i,this.b=n,this.a=null!=r?r:1;else{if(null==t)throw new TypeError("Invalid color number");this.r=255&t>>16,this.g=255&t>>8,this.b=255&t,this.a=null!=i?i:1}this.normalize()}var i;return i=Math.pow(10,-6),t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.normalize=function(){return this.r&=255,this.g&=255,this.b&=255,this.a=this.a>1?1:i>this.a?0:this.a,this},t.prototype.toHex=function(){return this.r<<16|this.g<<8|this.b},t.prototype.toString=function(){return"[RGB] "+this.r+", "+this.g+", "+this.b+", "+this.a},t.prototype.toCSSString=function(){return this.normalize(),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},t}(),t.tm.Xor128=function(){function t(t){this.w=null!=t?t:88675123,this.x=123456789,this.y=362436069,this.z=521288629,this.w&=4294967295,this.cache=[]}return t.prototype.at=function(t){for(;t>=this.cache.length;)this.random();return this.cache[t]},t.prototype.random=function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(t^t>>8),this.cache.push(this.w),this.w},t}()}).call(this);