(function(){var t,n,e,i,r={}.hasOwnProperty,l=function(t,n){function e(){this.constructor=t}for(var i in n)r.call(n,i)&&(t[i]=n[i]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};n=function(t,e){var i,r,l;l=[];for(i in e)r=e[i],Object.prototype.hasOwnProperty.call(e,i)&&("[object Object]"===Object.prototype.toString.call(r)?(t[i]={},l.push(n(t[i],r))):l.push(t[i]=r));return l},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(e=module.exports).createjs&&(e.createjs={}),t=module.exports.createjs),n(t,{tm:{}}),t.tm.Bitmap=function(n){function e(n){return n instanceof t.tm.BitmapData?this.initialize(n.canvas):(this.initialize(n),void 0)}return l(e,n),e}(t.Bitmap),t.tm.BitmapData=function(){function n(t,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.ctx=this.canvas.getContext("2d")}var e,i,r,l;return r=t.Stage,e=t.Container,i=t.Shape,l=function(t){return"[object Number]"===Object.prototype.toString.call(t)},n.CHANNEL_RED=parseInt("1000",2),n.CHANNEL_GREEN=parseInt("0100",2),n.CHANNEL_BLUE=parseInt("0010",2),n.CHANNEL_ALPHA=parseInt("0001",2),n.prototype.noise=function(t,n,e,i,r,l,s,u,a){return null==e&&(e=88675123),null==i&&(i=!1),null==r&&(r=0),null==l&&(l=255),null==s&&(s=14),null==u&&(u=!1),null==a&&(a={x:0,y:0}),this._updatePixels(this._noise(t,n,e,i,r,l,s,u,a)),this},n.prototype._noise=function(e,i,r,l,s,u,a,o,h){var p,c,f,g,_,d,m,y,w,N,v,E,x,A,L,H,b,B,C,G,j,F,R,D;for(null==r&&(r=88675123),null==l&&(l=!1),null==s&&(s=0),null==u&&(u=255),null==a&&(a=14),null==o&&(o=!1),R=null!=h?h:{x:0,y:0},C=R.x,j=R.y,B=this.canvas.width,N=this.canvas.height,G=new t.tm.Xor128(r),A=Math.min(s,u),b=Math.abs(s-u),H=(a&n.CHANNEL_RED)/n.CHANNEL_RED,w=(a&n.CHANNEL_GREEN)/n.CHANNEL_GREEN,g=(a&n.CHANNEL_BLUE)/n.CHANNEL_BLUE,c=(a&n.CHANNEL_ALPHA)/n.CHANNEL_ALPHA,_=[],v=0,x=F=0,D=B*N;D>F;x=F+=1)d=C+x%B>>0,m=j+x/B>>0,d=d/e>>0,m=m/i>>0,l&&(d%=B,m%=N),E=m*B+d<<2,L=A+G.at(E++)%b,o?(y=f=L,E+=2):(y=A+G.at(E++)%b,f=A+G.at(E++)%b),p=A+G.at(E++)%b,_[v++]=L*H,_[v++]=y*w,_[v++]=f*g,_[v++]=255-p*c;return _},n.prototype.perlinNoise=function(t,n,e,i,r,l,s,u,a){return null==e&&(e=6),null==i&&(i=88675123),null==r&&(r=!1),null==l&&(l=.5),null==s&&(s=7),null==u&&(u=!1),null==a&&(a=[]),this._updatePixels(this._perlinNoise(t,n,e,i,r,l,s,u,a)),this},n.prototype._perlinNoise=function(n,e,i,r,l,s,u,a,o){var h,p,c,f,g,_,d,m,y,w,N,v,E,x,A,L,H,b,B,C,G,j,F;for(null==i&&(i=6),null==r&&(r=88675123),null==l&&(l=!1),null==s&&(s=.5),null==u&&(u=7),null==a&&(a=!1),null==o&&(o=[]),v=this.canvas.width,f=this.canvas.height,m=[],p=0,g=E=0;i>E;g=E+=1)c=1<<g,h=Math.pow(s,g),m[g]={offset:o[g],frequency:c,amplitude:h,width:n/c,height:e/c},p+=h;for(p=1/p,x=0,H=m.length;H>x;x++)d=m[x],d.amplitude*=p;for(A=0,b=m.length;b>A;A++)d=m[A],w=this._noise(d.width,d.height,r,l,0,255,u,a,d.offset),w=new t.tm.GaussianFilter(Math.max(d.width,10),Math.max(d.height,10),8).filter(v,f,w),d.pixels=w;for(N=[],L=0,B=m.length;B>L;L++)for(d=m[L],w=d.pixels,h=d.amplitude,_=j=0,C=w.length;C>j;_=++j)y=w[_],N[_]=(N[_]||0)+y*h;for(g=F=0,G=N.length;G>F;g=++F)y=N[g],N[g]=255&y;return N},n.prototype._scale=function(t,n,e){var i,r,l,s,u,a,o,h,p;if(1===n&&1===e)return t.slice();for(u=this.canvas.width,r=this.canvas.height,i=[],l=0,o=h=0;r>h;o=h+=1)for(a=p=0;u>p;a=p+=1)s=u*(o/e>>0)+(a/n>>0)<<2,i[l++]=t[s++],i[l++]=t[s++],i[l++]=t[s++],i[l++]=t[s++];return i},n.prototype._updatePixels=function(t){var n,e,i,r,l,s;for(n=(i=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)).data,e=l=0,s=t.length;s>l;e=++l)r=t[e],n[e]=r;return this.ctx.putImageData(i,0,0)},n}(),t.tm.Graphics=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return l(n,t),n.getRGB=function(t,e,i,r){return n.__super__.constructor.getRGB.call(this,t>>0,e>>0,i>>0,r)},n.prototype.beginStroke=function(t,e,i,r){return 1===arguments.length?n.__super__.beginStroke.apply(this,arguments).apply(this,arguments):n.__super__.beginStroke.call(this,n.getRGB(t,e,i,r))},n.prototype.beginFill=function(t,e,i,r){return 1===arguments.length?n.__super__.beginFill.apply(this,arguments).apply(this,arguments):n.__super__.beginFill.call(this,n.getRGB(t,e,i,r))},n}(t.Graphics),t.tm.KernelFilter=function(n){function e(t,n,e){this.radiusX=t,this.radiusY=n,this.kernel=e}var i;return l(e,n),i=t.Rectangle,e.prototype.getBounds=function(){return new i(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},e.prototype.applyFilter=function(t,n,e,i,r,l,s,u){var a,o,h,p;return null==l&&(l=t),null==s&&(s=n),null==u&&(u=e),a=t.getImageData(n,e,i,r),o=a.data,h=l.createImageData(i,r),p=h.data,this.filter(i,r,o,p),l.putImageData(h,s,u),!0},e.prototype.filter=function(t,n,e,i){var r,l,s,u,a,o,h,p,c,f,g,_,d,m,y,w,N,v,E,x,A;for(null==i&&(i=[]),a=this.kernel,d=this.radiusX-1,m=this.radiusY-1,o=d+this.radiusX,s=v=0,A=t*n;A>v;s=v+=1){for(w=s%t,N=s/t>>0,_=l=r=0,u=E=0,x=a.length;x>E;u=E+=1)y=a[u],h=u%o,p=u/o>>0,f=w-d+h,f=0>f?0:f>t-1?t-1:f,g=N-m+p,g=0>g?0:g>n-1?n-1:g,c=t*g+f<<2,_+=e[c]*y,l+=e[++c]*y,r+=e[++c]*y;c=t*N+w<<2,i[c]=255&_,i[++c]=255&l,i[++c]=255&r,i[++c]=e[c]}return i},e.prototype.clone=function(){return new e(this.radiusX,this.radiusY,this.kernel)},e.prototype.toString=function(){return"[KernelFilter]"},e}(t.Filter),t.tm.GaussianFilter=function(t){function n(t,e,i){var r,l,s,u,a,o,h,p,c,f,g,_,d,m,y,w,N,v,E,x,A,L,H,b,B,C,G,j,F,R;if(null==t&&(t=2),null==e&&(e=2),f=0,u=[],null!=i)for(c=2*i*i,N=v=j=1-e;e>v;N=v+=1)for(w=E=F=1-t;t>E;w=E+=1)g=1/(c*Math.PI)*Math.exp(-(w*w+N*N)/c),f+=g,u.push(g);else{for(h=[],o=x=0,R=2*Math.max(t,e)-1;R>=0?R>x:x>R;o=R>=0?++x:--x)for(h[o]=r=[],p=h[o-1],a=o+1,s=A=0;a>=0?a>A:A>a;s=a>=0?++A:--A)r[s]=0===s||s===a-1?1:p[s-1]+p[s];for(d=h[2*(t-1)],y=h[2*(e-1)],B=0,L=y.length;L>B;B++)for(m=y[B],C=0,H=d.length;H>C;C++)_=d[C],g=_*m,f+=g,u.push(g)}for(l=G=0,b=u.length;b>G;l=++G)g=u[l],u[l]/=f;n.__super__.constructor.call(this,t,e,u)}return l(n,t),n.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},n.prototype.toString=function(){return"[GaussianBlurFilter]"},n}(t.tm.KernelFilter),t.tm.Xor128=function(){function t(t){this.w=null!=t?t:88675123,this.x=123456789,this.y=362436069,this.z=521288629,this.w&=4294967295,this.cache=[]}return t.prototype.at=function(t){for(;t>=this.cache.length;)this.random();return this.cache[t]},t.prototype.random=function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(t^t>>8),this.cache.push(this.w),this.w},t}()}).call(this);