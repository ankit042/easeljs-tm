(function(){var t,r,e,n={}.hasOwnProperty,i=function(t,r){function e(){this.constructor=t}for(var i in r)n.call(r,i)&&(t[i]=r[i]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};r=function(t,e){var n,i,o;o=[];for(n in e)i=e[n],Object.prototype.hasOwnProperty.call(e,n)&&("[object Object]"===Object.prototype.toString.call(i)?(t[n]={},o.push(r(t[n],i))):o.push(t[n]=i));return o},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(e=module.exports).createjs&&(e.createjs={}),t=module.exports.createjs),r(t,{tm:{}}),t.tm.Graphics=function(r){function e(){e.__super__.constructor.call(this)}var n,o,l,u;return i(e,r),l=t.Stage,n=t.Container,o=t.Shape,u=function(){function t(t){null==t&&(t=88675123),this.x=123456789,this.y=362436069,this.z=521288629,this.w=t%4294967295}return t.prototype.random=function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(t^t>>8)},t}(),e.prototype.noise=function(t,r,e,n,i,o,l,u,s,a){return null==o&&(o=0),null==l&&(l=255),null==u&&(u=7),null==s&&(s=!1),null==a&&(a={x:0,y:0}),this._updatePixels(t,r,e,n,this._noise(e,n,i,o,l,u,s,a)),this},e.prototype._noise=function(t,r,e,n,i,o,l,s){var a,p,h,c,f,d,y,w,_,m,g,v,x,j,F,G,b,M;if(null==n&&(n=0),null==i&&(i=255),null==o&&(o=7),null==l&&(l=!1),M=null!=s?s:{x:0,y:0},g=M.x,x=M.y,y=Math.min(n,i),w=Math.abs(n-i),v=new u(e%255<<24|g%4095<<12|x%4095),_=[],d=0,l)for(c=j=0;r>j;c=j+=1)for(h=F=0;t>F;h=F+=1)m=f=p=y+v.random()%w,a=255,_[d++]=m,_[d++]=f,_[d++]=p,_[d++]=a;else for(h=G=0;t>G;h=G+=1)for(c=b=0;r>b;c=b+=1)m=y+v.random()%w,f=y+v.random()%w,p=y+v.random()%w,a=255,_[d++]=m,_[d++]=f,_[d++]=p,_[d++]=a;return _},e.prototype.perlineNoise=function(t,r,e,n,i,o,l,u,s,a,p,h,c){return null==p&&(p=7),null==h&&(h=!1),null==c&&(c=[]),this._updatePixels(t,r,e,n,this._perlineNoise(e,n,i,o,l,u,s,a,p,h,c)),this},e.prototype._perlineNoise=function(r,e,n,i,o,l,u,s,a,p,h){var c,f,d,y,w,_,m,g,v,x,j,F,G,b,M,P,X,Y,k,O,S,B,I,z,D,K,N,R,C,q,A,E;for(null==a&&(a=7),null==p&&(p=!1),null==h&&(h=[]),g=[],j=[],X=0,d=O=0;o>O;d=O+=1)k=1<<d,j[d]=k,X+=k;for(w=1/X,d=S=0,z=j.length;z>S;d=++S)x=j[d],j[d]*=w;for(c=new t.tm.GaussianFilter(2,2,1),d=B=0;o>B;d=B+=1)v=h[d],g[d]=m={persistence:j[d],pixels:[]},b=1<<d,Y=Math.ceil(r/b),f=Math.ceil(e/b),_=this._noise(Y,f,l,0,255,a,p,v),M=this._scale(_,Y,f,r,e,d),c.filter(r,e,M,m.pixels);for(P=[],d=I=0,D=j.length;D>I;d=++I)if(x=j[d],E=g[d],Y=E.w,f=E.h,G=E.pixels,0===d)for(y=C=0,K=G.length;K>C;y=++C)F=G[y],P[y]=F*x;else for(y=q=0,N=G.length;N>q;y=++q)F=G[y],P[y]+=F*x;for(d=A=0,R=P.length;R>A;d=++A)F=P[d],P[d]=255&F;return P},e.prototype._scale=function(t,r,e,n,i,o){var l,u,s,a,p,h,c;if(0===o)return t.slice();for(l=[],u=0,p=h=0;i>=0?i>h:h>i;p=i>=0?++h:--h)for(a=c=0;n>=0?n>c:c>n;a=n>=0?++c:--c)s=r*(p>>o)+(a>>o)<<2,l[u++]=t[s++],l[u++]=t[s++],l[u++]=t[s++],l[u++]=t[s++];return l},e.prototype._updatePixels=function(t,r,n,i,o){var l,u,s,a,p,h,c,f,d;for(h=0,d=[],s=f=0;n>=0?n>f:f>n;s=n>=0?++f:--f)d.push(function(){var n,f;for(f=[],a=n=0;i>=0?i>n:n>i;a=i>=0?++n:--n)c=o[h++],p=o[h++],u=o[h++],l=o[h++],this.beginFill(e.getRGB(c,p,u,l)),f.push(this.drawRect(t+s,r+a,1,1));return f}.call(this));return d},e}(t.Graphics),t.tm.KernelFilter=function(r){function e(t,r,e){this.radiusX=t,this.radiusY=r,this.kernel=e}var n;return i(e,r),n=t.Rectangle,e.prototype.getBounds=function(){return new n(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},e.prototype.applyFilter=function(t,r,e,n,i,o,l,u){var s,a,p,h;return null==o&&(o=t),null==l&&(l=r),null==u&&(u=e),s=t.getImageData(r,e,n,i),a=s.data,p=o.createImageData(n,i),h=p.data,this.filter(n,i,a,h),o.putImageData(p,l,u),!0},e.prototype.filter=function(t,r,e,n){var i,o,l,u,s,a,p,h,c,f,d,y,w,_,m,g,v,x;for(l=this.kernel,y=this.radiusX-1,w=this.radiusY-1,s=y+this.radiusX,u=w+this.radiusY,x=[],g=v=0;r>v;g=v+=1)x.push(function(){var v,x,j,F;for(F=[],m=v=0;t>v;m=v+=1){for(d=o=i=0,a=x=0;s>x;a=x+=1)for(p=j=0;u>j;p=j+=1)_=l[s*p+a],c=m-y+p,c=0>c?0:c>t-1?t-1:c,f=g-w+a,f=0>f?0:f>r-1?r-1:f,h=t*f+c<<2,d+=e[h]*_,o+=e[++h]*_,i+=e[++h]*_;h=t*g+m<<2,n[h]=255&d,n[++h]=255&o,n[++h]=255&i,F.push(n[++h]=e[h])}return F}());return x},e.prototype.clone=function(){return new e(this.radiusX,this.radiusY,this.kernel)},e.prototype.toString=function(){return"[KernelFilter]"},e}(t.Filter),t.tm.GaussianFilter=function(t){function r(t,e,n){var i,o,l,u,s,a,p,h,c,f,d,y,w;for(null==n&&(n=1),s=2*n*n,p=0,u=[],o=h=y=1-e;e>h;o=h+=1)for(i=c=w=1-t;t>c;i=c+=1)a=1/(s*Math.PI)*Math.exp(-(i*i+o*o)/s),p+=a,u.push(a);for(l=f=0,d=u.length;d>f;l=++f)u[l],u[l]/=p;r.__super__.constructor.call(this,t,e,u)}return i(r,t),r.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},r.prototype.toString=function(){return"[GaussianBlurFilter]"},r}(t.tm.KernelFilter)}).call(this);