(function(){var t,n,e,i={}.hasOwnProperty,r=function(t,n){function e(){this.constructor=t}for(var r in n)i.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};n=function(t,e){var i,r,a;a=[];for(i in e)r=e[i],Object.prototype.hasOwnProperty.call(e,i)&&("[object Object]"===Object.prototype.toString.call(r)?(t[i]={},a.push(n(t[i],r))):a.push(t[i]=r));return a},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(e=module.exports).createjs&&(e.createjs={}),t=module.exports.createjs),n(t,{tm:{}}),t.tm.Bitmap=function(n){function e(n){return n instanceof t.tm.BitmapData?this.initialize(n.canvas):(this.initialize(n),void 0)}return r(e,n),e}(t.Bitmap),t.tm.BitmapData=function(){function n(t,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.ctx=this.canvas.getContext("2d")}var e,i,r,a;return r=t.Stage,e=t.Container,i=t.Shape,a=function(t){return"[object Number]"===Object.prototype.toString.call(t)},n.CHANNEL_RED=parseInt("1000",2),n.CHANNEL_GREEN=parseInt("0100",2),n.CHANNEL_BLUE=parseInt("0010",2),n.CHANNEL_ALPHA=parseInt("0001",2),n.prototype.noise=function(t,n,e,i,r,a,s,o,l){return null==i&&(i=!1),null==r&&(r=0),null==a&&(a=255),null==s&&(s=14),null==o&&(o=!1),null==l&&(l={x:0,y:0}),this._updatePixels(this._noise(t,n,e,i,r,a,s,o,l)),this},n.prototype._noise=function(e,i,r,a,s,o,l,u,h){var c,p,f,d,y,m,w,N,v,_,g,E,x,A,L,H,C,b,j,B,D,I,X,P;for(null==a&&(a=!1),null==s&&(s=0),null==o&&(o=255),null==l&&(l=14),null==u&&(u=!1),X=null!=h?h:{x:0,y:0},j=X.x,D=X.y,b=this.canvas.width,v=this.canvas.height,x=Math.min(s,o),A=Math.abs(s-o),C=(l&n.CHANNEL_RED)/n.CHANNEL_RED,N=(l&n.CHANNEL_GREEN)/n.CHANNEL_GREEN,d=(l&n.CHANNEL_BLUE)/n.CHANNEL_BLUE,p=(l&n.CHANNEL_ALPHA)/n.CHANNEL_ALPHA,B=new t.tm.Xor128(r),L=[],_=0,E=I=0,P=b*v;P>I;E=I+=1)y=j+E%b>>0,m=D+E/b>>0,a&&(y%=b,m%=v),g=m*b+y<<2,H=x+B.at(g++)%A,u?(w=f=H,g+=2):(w=x+B.at(g++)%A,f=x+B.at(g++)%A),c=x+B.at(g++)%A,L[_++]=H*C,L[_++]=w*N,L[_++]=f*d,L[_++]=255-c*p;return L},n.prototype.perlinNoise=function(t,n,e,i,r,a,s,o,l){return null==e&&(e=6),null==i&&(i=88675123),null==r&&(r=!1),null==a&&(a=.5),null==s&&(s=7),null==o&&(o=!1),null==l&&(l=[]),this._updatePixels(this._perlinNoise(t,n,e,i,r,a,s,o,l)),this},n.prototype._perlinNoise=function(t,n,e,i,r,a,s,o,l){var u,h,c,p,f,d,y,m,w,N,v,_,g,E,x,A,L,H,C,b,j,B,D,I;for(null==e&&(e=6),null==i&&(i=88675123),null==r&&(r=!1),null==a&&(a=.5),null==s&&(s=7),null==o&&(o=!1),null==l&&(l=[]),g=this.canvas.width,p=this.canvas.height,m=[],h=0,f=E=0;e>E;f=E+=1)c=1<<f,u=Math.pow(a,f),m[f]={offset:l[f],frequency:c,amplitude:u,baseX:t/c,baseY:n/c},h+=u;for(h=1/h,x=0,H=m.length;H>x;x++)y=m[x],y.amplitude*=h;for(f=A=0,C=m.length;C>A;f=++A)y=m[f],w=y.offset,t=y.baseX,n=y.baseY,v=this._noise(t,n,i,r,0,255,s,o,w),y.pixels=v;for(_=[],L=0,b=m.length;b>L;L++)for(y=m[L],v=y.pixels,u=y.amplitude,d=D=0,j=v.length;j>D;d=++D)N=v[d],_[d]=(_[d]||0)+N*u;for(f=I=0,B=_.length;B>I;f=++I)N=_[f],_[f]=255&N;return _},n.prototype._scale=function(t,n,e){var i,r,a,s,o,l,u,h,c;if(1===n&&1===e)return t.slice();for(o=this.canvas.width,r=this.canvas.height,i=[],a=0,u=h=0;r>h;u=h+=1)for(l=c=0;o>c;l=c+=1)s=o*(u/e>>0)+(l/n>>0)<<2,i[a++]=t[s++],i[a++]=t[s++],i[a++]=t[s++],i[a++]=t[s++];return i},n.prototype._updatePixels=function(t){var n,e,i,r,a,s;for(n=(i=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)).data,e=a=0,s=t.length;s>a;e=++a)r=t[e],n[e]=r;return this.ctx.putImageData(i,0,0)},n}(),t.tm.KernelFilter=function(n){function e(t,n,e){this.radiusX=t,this.radiusY=n,this.kernel=e}var i;return r(e,n),i=t.Rectangle,e.prototype.getBounds=function(){return new i(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},e.prototype.applyFilter=function(t,n,e,i,r,a,s,o){var l,u,h,c;return null==a&&(a=t),null==s&&(s=n),null==o&&(o=e),l=t.getImageData(n,e,i,r),u=l.data,h=a.createImageData(i,r),c=h.data,this.filter(i,r,u,c),a.putImageData(h,s,o),!0},e.prototype.filter=function(t,n,e,i){var r,a,s,o,l,u,h,c,p,f,d,y,m,w,N,v,_,g,E,x;for(null==i&&(i=[]),s=this.kernel,y=this.radiusX-1,m=this.radiusY-1,l=y+this.radiusX,o=m+this.radiusY,v=_=0;n>_;v=_+=1)for(N=g=0;t>g;N=g+=1){for(d=a=r=0,u=E=0;l>E;u=E+=1)for(h=x=0;o>x;h=x+=1)w=s[l*h+u],p=N-y+h,p=0>p?0:p>t-1?t-1:p,f=v-m+u,f=0>f?0:f>n-1?n-1:f,c=t*f+p<<2,d+=e[c]*w,a+=e[++c]*w,r+=e[++c]*w;c=t*v+N<<2,i[c]=255&d,i[++c]=255&a,i[++c]=255&r,i[++c]=e[c]}return i},e.prototype.clone=function(){return new e(this.radiusX,this.radiusY,this.kernel)},e.prototype.toString=function(){return"[KernelFilter]"},e}(t.Filter),t.tm.GaussianFilter=function(t){function n(t,e,i){var r,a,s,o,l,u,h,c,p,f,d,y,m;for(null==i&&(i=1),l=2*i*i,h=0,o=[],a=c=y=1-e;e>c;a=c+=1)for(r=p=m=1-t;t>p;r=p+=1)u=1/(l*Math.PI)*Math.exp(-(r*r+a*a)/l),h+=u,o.push(u);for(s=f=0,d=o.length;d>f;s=++f)o[s],o[s]/=h;n.__super__.constructor.call(this,t,e,o)}return r(n,t),n.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},n.prototype.toString=function(){return"[GaussianBlurFilter]"},n}(t.tm.KernelFilter),t.tm.Xor128=function(){function t(t){this.w=null!=t?t:88675123,this.x=123456789,this.y=362436069,this.z=521288629,this.w&=4294967295,this.cache=[]}return t.prototype.at=function(t){for(;t>=this.cache.length;)this.random();return this.cache[t]},t.prototype.random=function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(t^t>>8),this.cache.push(this.w),this.w},t}()}).call(this);