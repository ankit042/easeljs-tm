(function(){var t,r,e,n={}.hasOwnProperty,o=function(t,r){function e(){this.constructor=t}for(var o in r)n.call(r,o)&&(t[o]=r[o]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};r=function(t,e){var n,o,i;i=[];for(n in e)o=e[n],Object.prototype.hasOwnProperty.call(e,n)&&("[object Object]"===Object.prototype.toString.call(o)?(t[n]={},i.push(r(t[n],o))):i.push(t[n]=o));return i},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(e=module.exports).createjs&&(e.createjs={}),t=module.exports.createjs),r(t,{tm:{}}),t.tm.Graphics=function(r){function e(){e.__super__.constructor.call(this)}var n,i,l;return o(e,r),l=t.Stage,n=t.Container,i=t.Shape,e.prototype.noise=function(t,r,e,n,o,i,l,u,s,a){return null==i&&(i=0),null==l&&(l=255),null==u&&(u=7),null==s&&(s=!1),null==a&&(a={x:0,y:0}),this._updatePixels(t,r,e,n,this._noise(e,n,o,i,l,u,s,a)),this},e.prototype._noise=function(t,r,e,n,o,i,l,u){var s,a,p,c,f,h,d,y,_,m,w,g,v,x,j,F,G,X;if(null==n&&(n=0),null==o&&(o=255),null==i&&(i=7),null==l&&(l=!1),X=null!=u?u:{x:0,y:0},w=X.x,v=X.y,d=Math.min(n,o),y=Math.abs(n-o),g=new Xor128(e%255<<24|w%4095<<12|v%4095),_=[],h=0,l)for(c=x=0;r>x;c=x+=1)for(p=j=0;t>j;p=j+=1)m=f=a=d+g.random()%y,s=255,_[h++]=m,_[h++]=f,_[h++]=a,_[h++]=s;else for(p=F=0;t>F;p=F+=1)for(c=G=0;r>G;c=G+=1)m=d+g.random()%y,f=d+g.random()%y,a=d+g.random()%y,s=255,_[h++]=m,_[h++]=f,_[h++]=a,_[h++]=s;return _},e.prototype.perlineNoise=function(t,r,e,n,o,i,l,u,s,a,p,c,f){return null==p&&(p=7),null==c&&(c=!1),null==f&&(f=[]),this._updatePixels(t,r,e,n,this._perlineNoise(e,n,o,i,l,u,s,a,p,c,f)),this},e.prototype._perlineNoise=function(r,e,n,o,i,l,u,s,a,p,c){var f,h,d,y,_,m,w,g,v,x,j,F,G,X,b,M,P,Y,k,O,S,B,I,D,K,N,R,C,q;for(null==a&&(a=7),null==p&&(p=!1),null==c&&(c=[]),w=[],x=[],b=0,d=Y=0;i>Y;d=Y+=1)P=1<<d,x[d]=P,b+=P;for(_=1/b,d=k=0,B=x.length;B>k;d=++k)v=x[d],x[d]*=_;for(f=new t.tm.GaussianFilter(2,2,1),d=O=0;i>O;d=O+=1){if(g=c[d],G=1<<d,M=Math.ceil(r/G),h=Math.ceil(e/G),F=this._noise(M,h,l,0,255,a,p,g),F=this._scale(F,M,h,r,e,d),F=f.filter(r,e,F),5===d)return F;w[d]=m={persistence:x[d],pixels:F}}for(X=[],d=S=0,I=x.length;I>S;d=++S)if(v=x[d],F=w[d].pixels,0===d)for(y=R=0,D=F.length;D>R;y=++R)j=F[y],X[y]=j*v;else for(y=C=0,K=F.length;K>C;y=++C)j=F[y],X[y]+=j*v;for(d=q=0,N=X.length;N>q;d=++q)j=X[d],X[d]=255&j;return X},e.prototype._scale=function(t,r,e,n,o,i){var l,u,s,a,p,c,f;if(0===i)return t.slice();for(l=[],u=0,p=c=0;o>=0?o>c:c>o;p=o>=0?++c:--c)for(a=f=0;n>=0?n>f:f>n;a=n>=0?++f:--f)s=r*(p>>i)+(a>>i)<<2,l[u++]=t[s++],l[u++]=t[s++],l[u++]=t[s++],l[u++]=t[s++];return l},e.prototype._updatePixels=function(t,r,n,o,i){var l,u,s,a,p,c,f,h,d;for(c=0,d=[],s=h=0;n>=0?n>h:h>n;s=n>=0?++h:--h)d.push(function(){var n,h;for(h=[],a=n=0;o>=0?o>n:n>o;a=o>=0?++n:--n)f=i[c++],p=i[c++],u=i[c++],l=i[c++],this.beginFill(e.getRGB(f,p,u,l)),h.push(this.drawRect(t+s,r+a,1,1));return h}.call(this));return d},e}(t.Graphics),t.tm.KernelFilter=function(r){function e(t,r,e){this.radiusX=t,this.radiusY=r,this.kernel=e}var n;return o(e,r),n=t.Rectangle,e.prototype.getBounds=function(){return new n(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},e.prototype.applyFilter=function(t,r,e,n,o,i,l,u){var s,a,p,c;return null==i&&(i=t),null==l&&(l=r),null==u&&(u=e),s=t.getImageData(r,e,n,o),a=s.data,p=i.createImageData(n,o),c=p.data,this.filter(n,o,a,c),i.putImageData(p,l,u),!0},e.prototype.filter=function(t,r,e,n){var o,i,l,u,s,a,p,c,f,h,d,y,_,m,w,g,v,x;for(null==n&&(n=[]),l=this.kernel,y=this.radiusX-1,_=this.radiusY-1,s=y+this.radiusX,u=_+this.radiusY,x=[],g=v=0;r>v;g=v+=1)x.push(function(){var v,x,j,F;for(F=[],w=v=0;t>v;w=v+=1){for(d=i=o=0,a=x=0;s>x;a=x+=1)for(p=j=0;u>j;p=j+=1)m=l[s*p+a],f=w-y+p,f=0>f?0:f>t-1?t-1:f,h=g-_+a,h=0>h?0:h>r-1?r-1:h,c=t*h+f<<2,d+=e[c]*m,i+=e[++c]*m,o+=e[++c]*m;c=t*g+w<<2,n[c]=255&d,n[++c]=255&i,n[++c]=255&o,F.push(n[++c]=e[c])}return F}());return x},e.prototype.clone=function(){return new e(this.radiusX,this.radiusY,this.kernel)},e.prototype.toString=function(){return"[KernelFilter]"},e}(t.Filter),t.tm.GaussianFilter=function(t){function r(t,e,n){var o,i,l,u,s,a,p,c,f,h,d,y,_;for(null==n&&(n=1),s=2*n*n,p=0,u=[],i=c=y=1-e;e>c;i=c+=1)for(o=f=_=1-t;t>f;o=f+=1)a=1/(s*Math.PI)*Math.exp(-(o*o+i*i)/s),p+=a,u.push(a);for(l=h=0,d=u.length;d>h;l=++h)u[l],u[l]/=p;r.__super__.constructor.call(this,t,e,u)}return o(r,t),r.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},r.prototype.toString=function(){return"[GaussianBlurFilter]"},r}(t.tm.KernelFilter)}).call(this);