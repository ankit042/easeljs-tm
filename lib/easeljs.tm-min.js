(function(){var t,n,e,i,r={}.hasOwnProperty,s=function(t,n){function e(){this.constructor=t}for(var i in n)r.call(n,i)&&(t[i]=n[i]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};n=function(t,e){var i,r,s;s=[];for(i in e)r=e[i],Object.prototype.hasOwnProperty.call(e,i)&&("[object Object]"===Object.prototype.toString.call(r)?(t[i]={},s.push(n(t[i],r))):s.push(t[i]=r));return s},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(e=module.exports).createjs&&(e.createjs={}),t=module.exports.createjs),n(t,{tm:{}}),t.tm.Bitmap=function(n){function e(n){return n instanceof t.tm.BitmapData?this.initialize(n.canvas):(this.initialize(n),void 0)}return s(e,n),e}(t.Bitmap),t.tm.BitmapData=function(){function n(t,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.ctx=this.canvas.getContext("2d")}var e,i,r,s;return r=t.Stage,e=t.Container,i=t.Shape,s=function(t){return"[object Number]"===Object.prototype.toString.call(t)},n.CHANNEL_RED=parseInt("1000",2),n.CHANNEL_GREEN=parseInt("0100",2),n.CHANNEL_BLUE=parseInt("0010",2),n.CHANNEL_ALPHA=parseInt("0001",2),n.prototype.noise=function(t,n,e,i,r,s,o,u,h){return null==e&&(e=88675123),null==i&&(i=!1),null==r&&(r=0),null==s&&(s=255),null==o&&(o=14),null==u&&(u=!1),null==h&&(h={x:0,y:0}),this._updatePixels(this._noise(t,n,e,i,r,s,o,u,h)),this},n.prototype._noise=function(e,i,r,s,o,u,h,l,a){var c,p,f,g,m,_,d,y,w,v,N,b,S,B,G,x,E,R,H,C,A,L,j,F;for(null==r&&(r=88675123),null==s&&(s=!1),null==o&&(o=0),null==u&&(u=255),null==h&&(h=14),null==l&&(l=!1),j=null!=a?a:{x:0,y:0},H=j.x,A=j.y,R=this.canvas.width,v=this.canvas.height,C=new t.tm.Xor128(r),B=Math.min(o,u),E=Math.abs(o-u),x=(h&n.CHANNEL_RED)/n.CHANNEL_RED,w=(h&n.CHANNEL_GREEN)/n.CHANNEL_GREEN,g=(h&n.CHANNEL_BLUE)/n.CHANNEL_BLUE,p=(h&n.CHANNEL_ALPHA)/n.CHANNEL_ALPHA,m=[],N=0,S=L=0,F=R*v;F>L;S=L+=1)_=H+S%R>>0,d=A+S/R>>0,_=_/e>>0,d=d/i>>0,s&&(_%=R,d%=v),b=d*R+_<<2,G=B+C.at(b++)%E,l?(y=f=G,b+=2):(y=B+C.at(b++)%E,f=B+C.at(b++)%E),c=B+C.at(b++)%E,m[N++]=G*x,m[N++]=y*w,m[N++]=f*g,m[N++]=255-c*p;return m},n.prototype.perlinNoise=function(t,n,e,i,r,s,o,u,h){return null==e&&(e=6),null==i&&(i=88675123),null==r&&(r=!1),null==s&&(s=.5),null==o&&(o=7),null==u&&(u=!1),null==h&&(h=[]),this._updatePixels(this._perlinNoise(t,n,e,i,r,s,o,u,h)),this},n.prototype._perlinNoise=function(n,e,i,r,s,o,u,h,l){var a,c,p,f,g,m,_,d,y,w,v,N,b,S,B,G,x,E,R,H,C,A,L;for(null==i&&(i=6),null==r&&(r=88675123),null==s&&(s=!1),null==o&&(o=.5),null==u&&(u=7),null==h&&(h=!1),null==l&&(l=[]),N=this.canvas.width,f=this.canvas.height,d=[],c=0,g=b=0;i>b;g=b+=1)p=1<<g,a=Math.pow(o,g),d[g]={offset:l[g],frequency:p,amplitude:a,width:n/p,height:e/p},c+=a;for(c=1/c,S=0,x=d.length;x>S;S++)_=d[S],_.amplitude*=c;for(B=0,E=d.length;E>B;B++)_=d[B],w=this._noise(_.width,_.height,r,s,0,255,u,h,_.offset),w=new t.tm.GaussianFilter(Math.max(_.width,10),Math.max(_.height,10),8).filter(N,f,w),_.pixels=w;for(v=[],G=0,R=d.length;R>G;G++)for(_=d[G],w=_.pixels,a=_.amplitude,m=A=0,H=w.length;H>A;m=++A)y=w[m],v[m]=(v[m]||0)+y*a;for(g=L=0,C=v.length;C>L;g=++L)y=v[g],v[g]=255&y;return v},n.prototype._scale=function(t,n,e){var i,r,s,o,u,h,l,a,c;if(1===n&&1===e)return t.slice();for(u=this.canvas.width,r=this.canvas.height,i=[],s=0,l=a=0;r>a;l=a+=1)for(h=c=0;u>c;h=c+=1)o=u*(l/e>>0)+(h/n>>0)<<2,i[s++]=t[o++],i[s++]=t[o++],i[s++]=t[o++],i[s++]=t[o++];return i},n.prototype._updatePixels=function(t){var n,e,i,r,s,o;for(n=(i=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)).data,e=s=0,o=t.length;o>s;e=++s)r=t[e],n[e]=r;return this.ctx.putImageData(i,0,0)},n}(),t.tm.Graphics=function(n){function e(){return i=e.__super__.constructor.apply(this,arguments)}return s(e,n),e.getRGB=function(t,n,i,r){return e.__super__.constructor.getRGB.call(this,t>>0,n>>0,i>>0,r)},e.prototype.beginStroke=function(n,i,r,s){return 1===arguments.length?"[object Number]"===Object.prototype.toString.call(n)?e.__super__.beginStroke.call(this,new t.tm.RGB(n).toCSSString()):e.__super__.beginStroke.call(this,n):e.__super__.beginStroke.call(this,e.getRGB(n,i,r,s))},e.prototype.beginFill=function(n,i,r,s){return 1===arguments.length?"[object Number]"===Object.prototype.toString.call(n)?e.__super__.beginFill.call(this,new t.tm.RGB(n).toCSSString()):e.__super__.beginFill.call(this,n):e.__super__.beginFill.call(this,e.getRGB(n,i,r,s))},e}(t.Graphics),t.tm.HSV=function(){function n(n,e,i){var r,s,o,u,h,l,a,c;this.h=n,this.s=e,this.v=i,1===arguments.length&&(u=n,l=new t.tm.RGB(u),h=l.r/255,o=l.g/255,r=l.b/255,n=e=i=0,a=h>=o?h:o,r>a&&(a=r),c=o>=h?h:o,c>r&&(c=r),i=a,s=a-c,e=0===a?0:s/a,0!==e&&(h===a?n=(o-r)/s:o===a?n=2+(r-h)/s:r===a&&(n=4+(h-o)/s),n=60*n,0>n&&(n+=360)),this.h=n,this.s=e,this.v=i),this.normalize()}return n.interpolate=function(t,e,i){var r,s,o,u,h,l;for(r=new n,l=["h","s","v"],s=u=0,h=l.length;h>u;s=++u)o=l[s],r[o]=t[o]+(e[o]-t[o])*i;return r.normalize()},n.prototype.normalize=function(){return this.s=0>this.s?0:this.s>1?1:this.s,this.v=0>this.v?0:this.v>1?1:this.v,this.h=this.h%360,0>this.h&&(this.h+=360),this},n.prototype.toRGB=function(){var n,e,i,r,s,o,u;switch(this.normalize(),n=this.h,i=this.s,r=this.v,n/=60,e=n>>0,s=r*(1-i),o=r*(1-i*(n-1)),u=r*(1-i*(1-n+e)),s=255*s>>0,o=255*o>>0,u=255*u>>0,r=255*r>>0,e){case 0:return new t.tm.RGB(r,u,s);case 1:return new t.tm.RGB(o,r,s);case 2:return new t.tm.RGB(s,r,u);case 3:return new t.tm.RGB(s,o,r);case 4:return new t.tm.RGB(u,s,r);case 5:return new t.tm.RGB(r,s,o)}},n.prototype.toHex=function(){return this.toRGB().toHex()},n.prototype.toString=function(){return"[HSV] "+this.h+", "+this.s+", "+this.v},n.prototype.toCSSString=function(t){return this.toRGB().toCSSString(t)},n}(),t.tm.KernelFilter=function(n){function e(t,n,e){this.radiusX=t,this.radiusY=n,this.kernel=e}var i;return s(e,n),i=t.Rectangle,e.prototype.getBounds=function(){return new i(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},e.prototype.applyFilter=function(t,n,e,i,r,s,o,u){var h,l,a,c;return null==s&&(s=t),null==o&&(o=n),null==u&&(u=e),h=t.getImageData(n,e,i,r),l=h.data,a=s.createImageData(i,r),c=a.data,this.filter(i,r,l,c),s.putImageData(a,o,u),!0},e.prototype.filter=function(t,n,e,i){var r,s,o,u,h,l,a,c,p,f,g,m,_,d,y,w,v,N,b,S,B;for(null==i&&(i=[]),h=this.kernel,_=this.radiusX-1,d=this.radiusY-1,l=_+this.radiusX,o=N=0,B=t*n;B>N;o=N+=1){for(w=o%t,v=o/t>>0,m=s=r=0,u=b=0,S=h.length;S>b;u=b+=1)y=h[u],a=u%l,c=u/l>>0,f=w-_+a,f=0>f?0:f>t-1?t-1:f,g=v-d+c,g=0>g?0:g>n-1?n-1:g,p=t*g+f<<2,m+=e[p]*y,s+=e[++p]*y,r+=e[++p]*y;p=t*v+w<<2,i[p]=255&m,i[++p]=255&s,i[++p]=255&r,i[++p]=e[p]}return i},e.prototype.clone=function(){return new e(this.radiusX,this.radiusY,this.kernel)},e.prototype.toString=function(){return"[KernelFilter]"},e}(t.Filter),t.tm.GaussianFilter=function(t){function n(t,e,i){var r,s,o,u,h,l,a,c,p,f,g,m,_,d,y,w,v,N,b,S,B,G,x,E,R,H,C,A,L,j;if(null==t&&(t=2),null==e&&(e=2),f=0,u=[],null!=i)for(p=2*i*i,v=N=A=1-e;e>N;v=N+=1)for(w=b=L=1-t;t>b;w=b+=1)g=1/(p*Math.PI)*Math.exp(-(w*w+v*v)/p),f+=g,u.push(g);else{for(a=[],l=S=0,j=2*Math.max(t,e)-1;j>=0?j>S:S>j;l=j>=0?++S:--S)for(a[l]=r=[],c=a[l-1],h=l+1,o=B=0;h>=0?h>B:B>h;o=h>=0?++B:--B)r[o]=0===o||o===h-1?1:c[o-1]+c[o];for(_=a[2*(t-1)],y=a[2*(e-1)],R=0,G=y.length;G>R;R++)for(d=y[R],H=0,x=_.length;x>H;H++)m=_[H],g=m*d,f+=g,u.push(g)}for(s=C=0,E=u.length;E>C;s=++C)g=u[s],u[s]/=f;n.__super__.constructor.call(this,t,e,u)}return s(n,t),n.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},n.prototype.toString=function(){return"[GaussianBlurFilter]"},n}(t.tm.KernelFilter),t.tm.RGB=function(){function t(t,n,e){var i;this.r=t,this.g=n,this.b=e,1===arguments.length&&(i=t,this.r=i>>16,this.g=i>>8,this.b=i),this.normalize()}return t.prototype.normalize=function(){return this.r&=255,this.g&=255,this.b&=255,this},t.prototype.toHex=function(){return this.r<<16|this.g<<8|this.b},t.prototype.toString=function(){return"[RGB] "+this.r+", "+this.g+", "+this.b},t.prototype.toCSSString=function(t){return this.normalize(),null!=t?"rgba("+this.r+", "+this.g+", "+this.b+", "+t+")":"rgb("+this.r+", "+this.g+", "+this.b+")"},t}(),t.tm.Xor128=function(){function t(t){this.w=null!=t?t:88675123,this.x=123456789,this.y=362436069,this.z=521288629,this.w&=4294967295,this.cache=[]}return t.prototype.at=function(t){for(;t>=this.cache.length;)this.random();return this.cache[t]},t.prototype.random=function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(t^t>>8),this.cache.push(this.w),this.w},t}()}).call(this);