(function(){var t,n,i,e,r={}.hasOwnProperty,s=function(t,n){function i(){this.constructor=t}for(var e in n)r.call(n,e)&&(t[e]=n[e]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n=function(t,i){var e,r,s;s=[];for(e in i)r=i[e],Object.prototype.hasOwnProperty.call(i,e)&&("[object Object]"===Object.prototype.toString.call(r)?(t[e]={},s.push(n(t[e],r))):s.push(t[e]=r));return s},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(i=module.exports).createjs&&(i.createjs={}),t=module.exports.createjs),n(t,{tm:{}}),t.tm.Bitmap=function(n){function i(n){return n instanceof t.tm.BitmapData?this.initialize(n.canvas):(this.initialize(n),void 0)}return s(i,n),i}(t.Bitmap),t.tm.BitmapData=function(){function n(t,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.ctx=this.canvas.getContext("2d")}var i,e,r,s;return r=t.Stage,i=t.Container,e=t.Shape,s=function(t){return"[object Number]"===Object.prototype.toString.call(t)},n.CHANNEL_RED=parseInt("1000",2),n.CHANNEL_GREEN=parseInt("0100",2),n.CHANNEL_BLUE=parseInt("0010",2),n.CHANNEL_ALPHA=parseInt("0001",2),n.prototype.noise=function(t,n,i,e,r,s,a,o,h){return null==i&&(i=88675123),null==e&&(e=!1),null==r&&(r=0),null==s&&(s=255),null==a&&(a=14),null==o&&(o=!1),null==h&&(h={x:0,y:0}),this._updatePixels(this._noise(t,n,i,e,r,s,a,o,h)),this},n.prototype._noise=function(i,e,r,s,a,o,h,l,u){var p,c,f,g,y,m,v,d,w,_,S,b,N,E,x,G,B,H,C,R,I,A,L,j;for(null==r&&(r=88675123),null==s&&(s=!1),null==a&&(a=0),null==o&&(o=255),null==h&&(h=14),null==l&&(l=!1),L=null!=u?u:{x:0,y:0},C=L.x,I=L.y,H=this.canvas.width,_=this.canvas.height,R=new t.tm.Xor128(r),E=Math.min(a,o),B=Math.abs(a-o),G=(h&n.CHANNEL_RED)/n.CHANNEL_RED,w=(h&n.CHANNEL_GREEN)/n.CHANNEL_GREEN,g=(h&n.CHANNEL_BLUE)/n.CHANNEL_BLUE,c=(h&n.CHANNEL_ALPHA)/n.CHANNEL_ALPHA,y=[],S=0,N=A=0,j=H*_;j>A;N=A+=1)m=C+N%H>>0,v=I+N/H>>0,m=m/i>>0,v=v/e>>0,s&&(m%=H,v%=_),b=v*H+m<<2,x=E+R.at(b++)%B,l?(d=f=x,b+=2):(d=E+R.at(b++)%B,f=E+R.at(b++)%B),p=E+R.at(b++)%B,y[S++]=x*G,y[S++]=d*w,y[S++]=f*g,y[S++]=255-p*c;return y},n.prototype.perlinNoise=function(t,n,i,e,r,s,a,o,h){return null==i&&(i=6),null==e&&(e=88675123),null==r&&(r=!1),null==s&&(s=.5),null==a&&(a=7),null==o&&(o=!1),null==h&&(h=[]),this._updatePixels(this._perlinNoise(t,n,i,e,r,s,a,o,h)),this},n.prototype._perlinNoise=function(n,i,e,r,s,a,o,h,l){var u,p,c,f,g,y,m,v,d,w,_,S,b,N,E,x,G,B,H,C,R,I,A;for(null==e&&(e=6),null==r&&(r=88675123),null==s&&(s=!1),null==a&&(a=.5),null==o&&(o=7),null==h&&(h=!1),null==l&&(l=[]),S=this.canvas.width,f=this.canvas.height,v=[],p=0,g=b=0;e>b;g=b+=1)c=1<<g,u=Math.pow(a,g),v[g]={offset:l[g],frequency:c,amplitude:u,width:n/c,height:i/c},p+=u;for(p=1/p,N=0,G=v.length;G>N;N++)m=v[N],m.amplitude*=p;for(E=0,B=v.length;B>E;E++)m=v[E],w=this._noise(m.width,m.height,r,s,0,255,o,h,m.offset),w=new t.tm.GaussianFilter(m.width,m.height,8).filter(S,f,w),m.pixels=w;for(_=[],x=0,H=v.length;H>x;x++)for(m=v[x],w=m.pixels,u=m.amplitude,y=I=0,C=w.length;C>I;y=++I)d=w[y],_[y]=(_[y]||0)+d*u;for(g=A=0,R=_.length;R>A;g=++A)d=_[g],_[g]=255&d;return _},n.prototype._scale=function(t,n,i){var e,r,s,a,o,h,l,u,p;if(1===n&&1===i)return t.slice();for(o=this.canvas.width,r=this.canvas.height,e=[],s=0,l=u=0;r>u;l=u+=1)for(h=p=0;o>p;h=p+=1)a=o*(l/i>>0)+(h/n>>0)<<2,e[s++]=t[a++],e[s++]=t[a++],e[s++]=t[a++],e[s++]=t[a++];return e},n.prototype._updatePixels=function(t){var n,i,e,r,s,a;for(n=(e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)).data,i=s=0,a=t.length;a>s;i=++s)r=t[i],n[i]=r;return this.ctx.putImageData(e,0,0)},n}(),t.tm.Graphics=function(n){function i(){return e=i.__super__.constructor.apply(this,arguments)}var r;return s(i,n),r=Math.PI/2,i.getRGB=function(t,n,e,r){return i.__super__.constructor.getRGB.call(this,t>>0,n>>0,e>>0,r)},i.prototype.beginStroke=function(n,e,r,s){return i.__super__.beginStroke.call(this,new t.tm.RGB(n,e,r,s).toCSSString())},i.prototype.beginFill=function(n,e,r,s){return i.__super__.beginFill.call(this,new t.tm.RGB(n,e,r,s).toCSSString())},i.prototype.beginCircularGradientFill=function(n,i,e,s,a,o,h,l,u,p){var c,f,g,y,m,v;switch(e){case"hsv":e=t.tm.HSV.interpolate;break;case"rgb":e=t.tm.RGB.interpolate}for(f=[],y=[],m=r/s,g=v=0;s>=v;g=v+=1)c=m*g,f[g]=e(n,i,1-Math.cos(c)).toCSSString(),y[g]=Math.sin(c);return this.beginRadialGradientFill(f,y,a,o,h,l,u,p)},i}(t.Graphics),t.tm.HSV=function(){function n(i,e,r,s){var a,o,h,l,u,p,c,f;return this instanceof n?0===arguments.length||arguments.length>2?(this.h=null!=i?i:0,this.s=null!=e?e:0,this.v=null!=r?r:0,this.a=null!=s?s:1,this.normalize(),void 0):i instanceof n?(this.apply(i),void 0):(i instanceof t.tm.RGB?p=i:(p=new t.tm.RGB,t.tm.RGB.apply(p,arguments)),u=p.r,h=p.g,a=p.b,s=p.a,u/=255,h/=255,a/=255,i=e=r=0,c=u>=h?u:h,a>c&&(c=a),f=h>=u?u:h,f>a&&(f=a),r=c,o=c-f,e=0===c?0:o/c,0!==e&&(u===c?i=(h-a)/o:h===c?i=2+(a-u)/o:a===c&&(i=4+(u-h)/o),i*=60,0>i&&(i+=360)),this.h=i,this.s=e,this.v=r,this.a=s,void 0):(l=new n,n.apply(l,arguments),l)}return n.interpolate=function(t,i,e){var r,s,a,o,h;for(t instanceof n||(t=new n(t)),i instanceof n||(i=new n(i)),r=new n,h=["h","s","v","a"],a=0,o=h.length;o>a;a++)s=h[a],r[s]=t[s]+(i[s]-t[s])*e;return r.normalize()},n.prototype.clone=function(){return new n(this.h,this.s,this.v,this.a)},n.prototype.apply=function(t){var n;return this.h=t.h,this.s=t.s,this.v=t.v,this.a=null!=(n=t.a)?n:1},n.prototype.normalize=function(){return this.h=this.h%360,0>this.h&&(this.h+=360),0>this.s?this.s=0:this.s>1&&(this.s=1),0>this.v?this.v=0:this.v>1&&(this.v=1),0>this.a?this.a=0:this.a>1&&(this.a=1),this},n.prototype.toHex=function(){return t.tm.RGB(this).toHex()},n.prototype.toString=function(){return"[HSV] "+this.h+", "+this.s+", "+this.v+", "+this.a},n.prototype.toCSSString=function(){return t.tm.RGB(this).toCSSString()},n}(),t.tm.KernelFilter=function(n){function i(t,n,i){this.radiusX=t,this.radiusY=n,this.kernel=i}var e;return s(i,n),e=t.Rectangle,i.prototype.getBounds=function(){return new e(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},i.prototype.applyFilter=function(t,n,i,e,r,s,a,o){var h,l,u,p;return null==s&&(s=t),null==a&&(a=n),null==o&&(o=i),h=t.getImageData(n,i,e,r),l=h.data,u=s.createImageData(e,r),p=u.data,this.filter(e,r,l,p),s.putImageData(u,a,o),!0},i.prototype.filter=function(t,n,i,e){var r,s,a,o,h,l,u,p,c,f,g,y,m,v,d,w,_,S,b,N,E;for(null==e&&(e=[]),h=this.kernel,m=this.radiusX-1,v=this.radiusY-1,l=m+this.radiusX,a=S=0,E=t*n;E>S;a=S+=1){for(w=a%t,_=a/t>>0,y=s=r=0,o=b=0,N=h.length;N>b;o=b+=1)d=h[o],u=o%l,p=o/l>>0,f=w-m+u,f=0>f?0:f>t-1?t-1:f,g=_-v+p,g=0>g?0:g>n-1?n-1:g,c=t*g+f<<2,y+=i[c]*d,s+=i[++c]*d,r+=i[++c]*d;c=t*_+w<<2,e[c]=255&y,e[++c]=255&s,e[++c]=255&r,e[++c]=i[c]}return e},i.prototype.clone=function(){return new i(this.radiusX,this.radiusY,this.kernel)},i.prototype.toString=function(){return"[KernelFilter]"},i}(t.Filter),t.tm.GaussianFilter=function(t){function n(t,i,e){var r,s,a,o,h,l,u,p,c,f,g,y,m,v,d,w,_,S,b,N,E,x,G,B,H,C,R,I,A,L;if(null==t&&(t=2),null==i&&(i=2),f=0,o=[],null!=e)for(c=2*e*e,_=S=I=1-i;i>S;_=S+=1)for(w=b=A=1-t;t>b;w=b+=1)g=1/(c*Math.PI)*Math.exp(-(w*w+_*_)/c),f+=g,o.push(g);else{for(u=[],l=N=0,L=2*Math.max(t,i)-1;L>=0?L>N:N>L;l=L>=0?++N:--N)for(u[l]=r=[],p=u[l-1],h=l+1,a=E=0;h>=0?h>E:E>h;a=h>=0?++E:--E)r[a]=0===a||a===h-1?1:p[a-1]+p[a];for(m=u[2*(t-1)],d=u[2*(i-1)],H=0,x=d.length;x>H;H++)for(v=d[H],C=0,G=m.length;G>C;C++)y=m[C],g=y*v,f+=g,o.push(g)}for(s=R=0,B=o.length;B>R;s=++R)g=o[s],o[s]/=f;n.__super__.constructor.call(this,t,i,o)}return s(n,t),n.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},n.prototype.toString=function(){return"[GaussianBlurFilter]"},n}(t.tm.KernelFilter),t.tm.RGB=function(){function n(i,e,r,s){var a,o,h,l,u,p,c,f,g,y;if(!(this instanceof n))return l=new n,n.apply(l,arguments),l;if(null!=i){if(i instanceof n)return this.apply(i),void 0;if(i instanceof t.tm.HSV)switch(y=i.clone().normalize(),o=y.h,u=y.s,p=y.v,s=y.a,o/=60,h=o>>0,c=p*(1-u),f=p*(1-u*(o-1)),g=p*(1-u*(1-o+h)),c=255*c>>0,f=255*f>>0,g=255*g>>0,p=255*p>>0,h){case 0:this.apply(p,g,c,s);break;case 1:this.apply(f,p,c,s);break;case 2:this.apply(c,p,g,s);break;case 3:this.apply(c,f,p,s);break;case 4:this.apply(g,c,p,s);break;case 5:this.apply(p,c,f,s)}else{if("[object String]"===Object.prototype.toString.call(i))if(a=i.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/))this.r=parseInt(a[1],16),this.g=parseInt(a[2],16),this.b=parseInt(a[3],16),this.a=null!=e?e:1;else if(a=i.match(/#([0-9a-f])([0-9a-f])([0-9a-f])/))this.r=parseInt(""+a[1]+a[1],16),this.g=parseInt(""+a[2]+a[2],16),this.b=parseInt(""+a[3]+a[3],16),this.a=null!=e?e:1;else if(a=i.match(/rgba\(\s*(\S+?)\s*,\s*(\S+?)\s*,\s*(\S+?)\s*,\s*(\S+?)\s*\)/))this.r=+a[1],this.g=+a[2],this.b=+a[3],this.a=+a[4];else{if(!(a=i.match(/rgb\(\s*(\S+?)\s*,\s*(\S+?)\s*,\s*(\S+?)\s*\)/)))throw new TypeError("Invalid color string");this.r=+a[1],this.g=+a[2],this.b=+a[3],this.a=1}else if(null!=i&&null!=e&&null!=r)this.r=i,this.g=e,this.b=r,this.a=null!=s?s:1;else{if(null==i)throw new TypeError("Invalid color number");this.r=255&i>>16,this.g=255&i>>8,this.b=255&i,this.a=null!=e?e:1}this.normalize()}}}var i;return i=Math.pow(10,-6),n.interpolate=function(t,i,e){var r,s,a,o,h;for(t instanceof n||(t=new n(t)),i instanceof n||(i=new n(i)),s=new n,h=["r","g","b","a"],a=0,o=h.length;o>a;a++)r=h[a],s[r]=t[r]+(i[r]-t[r])*e;return s.normalize()},n.prototype.clone=function(){return new n(this.r,this.g,this.b,this.a)},n.prototype.apply=function(t,i,e,r){var s;return t instanceof n&&(s=t,t=s.r,i=s.g,e=s.b,r=s.a),this.r=t,this.g=i,this.b=e,this.a=null!=r?r:1},n.prototype.normalize=function(){return this.r&=255,this.g&=255,this.b&=255,this.a=this.a>1?1:i>this.a?0:this.a,this},n.prototype.toHex=function(){return this.r<<16|this.g<<8|this.b},n.prototype.toString=function(){return"[RGB] "+this.r+", "+this.g+", "+this.b+", "+this.a},n.prototype.toCSSString=function(){return this.normalize(),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},n}(),t.tm.Xor128=function(){function t(t){this.w=null!=t?t:88675123,this.x=123456789,this.y=362436069,this.z=521288629,this.w&=4294967295,this.cache=[]}return t.prototype.at=function(t){for(;t>=this.cache.length;)this.random();return this.cache[t]},t.prototype.random=function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(t^t>>8),this.cache.push(this.w),this.w},t}()}).call(this);