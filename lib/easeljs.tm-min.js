(function(){var t,n,e,i={}.hasOwnProperty,r=function(t,n){function e(){this.constructor=t}for(var r in n)i.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};n=function(t,e){var i,r,l;l=[];for(i in e)r=e[i],Object.prototype.hasOwnProperty.call(e,i)&&("[object Object]"===Object.prototype.toString.call(r)?(t[i]={},l.push(n(t[i],r))):l.push(t[i]=r));return l},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(e=module.exports).createjs&&(e.createjs={}),t=module.exports.createjs),n(t,{tm:{}}),t.tm.Bitmap=function(n){function e(n){return n instanceof t.tm.BitmapData?this.initialize(n.canvas):(this.initialize(n),void 0)}return r(e,n),e}(t.Bitmap),t.tm.BitmapData=function(){function n(t,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.ctx=this.canvas.getContext("2d")}var e,i,r,l;return r=t.Stage,e=t.Container,i=t.Shape,l=function(t){return"[object Number]"===Object.prototype.toString.call(t)},n.CHANNEL_RED=parseInt("1000",2),n.CHANNEL_GREEN=parseInt("0100",2),n.CHANNEL_BLUE=parseInt("0010",2),n.CHANNEL_ALPHA=parseInt("0001",2),n.prototype.noise=function(t,n,e,i,r,l,a,o,s){return null==e&&(e=88675123),null==i&&(i=!1),null==r&&(r=0),null==l&&(l=255),null==a&&(a=14),null==o&&(o=!1),null==s&&(s={x:0,y:0}),this._updatePixels(this._noise(t,n,e,i,r,l,a,o,s)),this},n.prototype._noise=function(e,i,r,l,a,o,s,u,h){var c,p,f,d,m,w,g,y,N,v,_,E,x,A,L,H,C,j,B,D,I,F,P,b;for(null==r&&(r=88675123),null==l&&(l=!1),null==a&&(a=0),null==o&&(o=255),null==s&&(s=14),null==u&&(u=!1),P=null!=h?h:{x:0,y:0},B=P.x,I=P.y,j=this.canvas.width,v=this.canvas.height,D=new t.tm.Xor128(r),A=Math.min(a,o),C=Math.abs(a-o),H=(s&n.CHANNEL_RED)/n.CHANNEL_RED,N=(s&n.CHANNEL_GREEN)/n.CHANNEL_GREEN,d=(s&n.CHANNEL_BLUE)/n.CHANNEL_BLUE,p=(s&n.CHANNEL_ALPHA)/n.CHANNEL_ALPHA,m=[],_=0,x=F=0,b=j*v;b>F;x=F+=1)w=B+x%j>>0,g=I+x/j>>0,w=w/e>>0,g=g/i>>0,l&&(w%=j,g%=v),E=g*j+w<<2,L=A+D.at(E++)%C,u?(y=f=L,E+=2):(y=A+D.at(E++)%C,f=A+D.at(E++)%C),c=A+D.at(E++)%C,m[_++]=L*H,m[_++]=y*N,m[_++]=f*d,m[_++]=255-c*p;return m},n.prototype.perlinNoise=function(t,n,e,i,r,l,a,o,s){return null==e&&(e=6),null==i&&(i=88675123),null==r&&(r=!1),null==l&&(l=.5),null==a&&(a=7),null==o&&(o=!1),null==s&&(s=[]),this._updatePixels(this._perlinNoise(t,n,e,i,r,l,a,o,s)),this},n.prototype._perlinNoise=function(n,e,i,r,l,a,o,s,u){var h,c,p,f,d,m,w,g,y,N,v,_,E,x,A,L,H,C,j,B,D,I,F;for(null==i&&(i=6),null==r&&(r=88675123),null==l&&(l=!1),null==a&&(a=.5),null==o&&(o=7),null==s&&(s=!1),null==u&&(u=[]),_=this.canvas.width,f=this.canvas.height,g=[],c=0,d=E=0;i>E;d=E+=1)p=1<<d,h=Math.pow(a,d),g[d]={offset:u[d],frequency:p,amplitude:h,width:n/p,height:e/p},c+=h;for(c=1/c,x=0,H=g.length;H>x;x++)w=g[x],w.amplitude*=c;for(A=0,C=g.length;C>A;A++)w=g[A],N=this._noise(w.width,w.height,r,l,0,255,o,s,w.offset),N=new t.tm.GaussianFilter(Math.max(w.width,10),Math.max(w.height,10),8).filter(_,f,N),w.pixels=N;for(v=[],L=0,j=g.length;j>L;L++)for(w=g[L],N=w.pixels,h=w.amplitude,m=I=0,B=N.length;B>I;m=++I)y=N[m],v[m]=(v[m]||0)+y*h;for(d=F=0,D=v.length;D>F;d=++F)y=v[d],v[d]=255&y;return v},n.prototype._scale=function(t,n,e){var i,r,l,a,o,s,u,h,c;if(1===n&&1===e)return t.slice();for(o=this.canvas.width,r=this.canvas.height,i=[],l=0,u=h=0;r>h;u=h+=1)for(s=c=0;o>c;s=c+=1)a=o*(u/e>>0)+(s/n>>0)<<2,i[l++]=t[a++],i[l++]=t[a++],i[l++]=t[a++],i[l++]=t[a++];return i},n.prototype._updatePixels=function(t){var n,e,i,r,l,a;for(n=(i=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)).data,e=l=0,a=t.length;a>l;e=++l)r=t[e],n[e]=r;return this.ctx.putImageData(i,0,0)},n}(),t.tm.KernelFilter=function(n){function e(t,n,e){this.radiusX=t,this.radiusY=n,this.kernel=e}var i;return r(e,n),i=t.Rectangle,e.prototype.getBounds=function(){return new i(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},e.prototype.applyFilter=function(t,n,e,i,r,l,a,o){var s,u,h,c;return null==l&&(l=t),null==a&&(a=n),null==o&&(o=e),s=t.getImageData(n,e,i,r),u=s.data,h=l.createImageData(i,r),c=h.data,this.filter(i,r,u,c),l.putImageData(h,a,o),!0},e.prototype.filter=function(t,n,e,i){var r,l,a,o,s,u,h,c,p,f,d,m,w,g,y,N,v,_,E,x,A;for(null==i&&(i=[]),s=this.kernel,w=this.radiusX-1,g=this.radiusY-1,u=w+this.radiusX,a=_=0,A=t*n;A>_;a=_+=1){for(N=a%t,v=a/t>>0,m=l=r=0,o=E=0,x=s.length;x>E;o=E+=1)y=s[o],h=o%u,c=o/u>>0,f=N-w+h,f=0>f?0:f>t-1?t-1:f,d=v-g+c,d=0>d?0:d>n-1?n-1:d,p=t*d+f<<2,m+=e[p]*y,l+=e[++p]*y,r+=e[++p]*y;p=t*v+N<<2,i[p]=255&m,i[++p]=255&l,i[++p]=255&r,i[++p]=e[p]}return i},e.prototype.clone=function(){return new e(this.radiusX,this.radiusY,this.kernel)},e.prototype.toString=function(){return"[KernelFilter]"},e}(t.Filter),t.tm.GaussianFilter=function(t){function n(t,e,i){var r,l,a,o,s,u,h,c,p,f,d,m,w,g,y,N,v,_,E,x,A,L,H,C,j,B,D,I,F,P;if(null==t&&(t=2),null==e&&(e=2),f=0,o=[],null!=i)for(p=2*i*i,v=_=I=1-e;e>_;v=_+=1)for(N=E=F=1-t;t>E;N=E+=1)d=1/(p*Math.PI)*Math.exp(-(N*N+v*v)/p),f+=d,o.push(d);else{for(h=[],u=x=0,P=2*Math.max(t,e)-1;P>=0?P>x:x>P;u=P>=0?++x:--x)for(h[u]=r=[],c=h[u-1],s=u+1,a=A=0;s>=0?s>A:A>s;a=s>=0?++A:--A)r[a]=0===a||a===s-1?1:c[a-1]+c[a];for(w=h[2*(t-1)],y=h[2*(e-1)],j=0,L=y.length;L>j;j++)for(g=y[j],B=0,H=w.length;H>B;B++)m=w[B],d=m*g,f+=d,o.push(d)}for(l=D=0,C=o.length;C>D;l=++D)d=o[l],o[l]/=f;n.__super__.constructor.call(this,t,e,o)}return r(n,t),n.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},n.prototype.toString=function(){return"[GaussianBlurFilter]"},n}(t.tm.KernelFilter),t.tm.Xor128=function(){function t(t){this.w=null!=t?t:88675123,this.x=123456789,this.y=362436069,this.z=521288629,this.w&=4294967295,this.cache=[]}return t.prototype.at=function(t){for(;t>=this.cache.length;)this.random();return this.cache[t]},t.prototype.random=function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(t^t>>8),this.cache.push(this.w),this.w},t}()}).call(this);