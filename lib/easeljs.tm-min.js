(function(){var t,n,e,i={}.hasOwnProperty,r=function(t,n){function e(){this.constructor=t}for(var r in n)i.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};n=function(t,e){var i,r,a;a=[];for(i in e)r=e[i],Object.prototype.hasOwnProperty.call(e,i)&&("[object Object]"===Object.prototype.toString.call(r)?(t[i]={},a.push(n(t[i],r))):a.push(t[i]=r));return a},"undefined"!=typeof window&&null!==window&&(null==window.createjs&&(window.createjs={}),t=window.createjs),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(null==(e=module.exports).createjs&&(e.createjs={}),t=module.exports.createjs),n(t,{tm:{}}),t.tm.Bitmap=function(n){function e(n){return n instanceof t.tm.BitmapData?this.initialize(n.canvas):(this.initialize(n),void 0)}return r(e,n),e}(t.Bitmap),t.tm.BitmapData=function(){function n(t,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.ctx=this.canvas.getContext("2d")}var e,i,r,a;return r=t.Stage,e=t.Container,i=t.Shape,a=function(t){return"[object Number]"===Object.prototype.toString.call(t)},n.CHANNEL_RED=parseInt("1000",2),n.CHANNEL_GREEN=parseInt("0100",2),n.CHANNEL_BLUE=parseInt("0010",2),n.CHANNEL_ALPHA=parseInt("0001",2),n.prototype.noise=function(t,n,e,i,r,a,s,o){return null==i&&(i=0),null==r&&(r=255),null==a&&(a=14),null==s&&(s=!1),null==o&&(o={x:0,y:0}),this._updatePixels(this._noise(t,n,e,i,r,a,s,o)),this},n.prototype._noise=function(e,i,r,a,s,o,u,l){var h,c,p,f,d,y,m,w,N,v,_,g,E,x,A,L,H,C,b,j,B,D,I,X;if(null==a&&(a=0),null==s&&(s=255),null==o&&(o=14),null==u&&(u=!1),D=null!=l?l:{x:0,y:0},C=D.x,b=D.y,H=this.canvas.width,m=this.canvas.height,_=Math.min(a,s),g=Math.abs(a-s),A=(o&n.CHANNEL_RED)/n.CHANNEL_RED,y=(o&n.CHANNEL_GREEN)/n.CHANNEL_GREEN,f=(o&n.CHANNEL_BLUE)/n.CHANNEL_BLUE,c=(o&n.CHANNEL_ALPHA)/n.CHANNEL_ALPHA,L=new t.tm.Xor128(r),E=[],w=0,N=H*b+C,u)for(v=j=0,I=H*m;I>j;v=j+=1)x=d=p=_+L.at(N)%g,N+=3,h=_+L.at(N++)%g,E[w++]=x*A,E[w++]=d*y,E[w++]=p*f,E[w++]=255-h*c;else for(v=B=0,X=H*m;X>B;v=B+=1)x=_+L.at(N++)%g,d=_+L.at(N++)%g,p=_+L.at(N++)%g,h=255,N++,E[w++]=x*A,E[w++]=d*y,E[w++]=p*f,E[w++]=255-h*c;return E},n.prototype.perlinNoise=function(t,n,e,i,r,a,s,o,u){return null==a&&(a=.5),null==s&&(s=7),null==o&&(o=!1),null==u&&(u=[]),this._updatePixels(this._perlinNoise(t,n,e,i,r,a,s,o,u)),this},n.prototype._perlinNoise=function(t,n,e,i,r,a,s,o,u){var l,h,c,p,f,d,y,m,w,N,v,_,g,E,x,A,L,H,C,b,j,B,D,I;for(null==a&&(a=.5),null==s&&(s=7),null==o&&(o=!1),null==u&&(u=[]),g=this.canvas.width,p=this.canvas.height,m=[],h=0,f=E=0;e>E;f=E+=1)c=1<<f,l=Math.pow(a,f),m[f]={offset:u[f],frequency:c,amplitude:l,baseX:t/c,baseY:n/c},h+=l;for(h=1/h,x=0,H=m.length;H>x;x++)y=m[x],y.amplitude*=h;for(f=A=0,C=m.length;C>A;f=++A)y=m[f],w=y.offset,t=y.baseX,n=y.baseY,v=this._noise(t,n,i,0,255,s,o,w),y.pixels=v;for(_=[],L=0,b=m.length;b>L;L++)for(y=m[L],v=y.pixels,l=y.amplitude,d=D=0,j=v.length;j>D;d=++D)N=v[d],_[d]=(_[d]||0)+N*l;for(f=I=0,B=_.length;B>I;f=++I)N=_[f],_[f]=255&N;return _},n.prototype._scale=function(t,n,e){var i,r,a,s,o,u,l,h,c;if(1===n&&1===e)return t.slice();for(o=this.canvas.width,r=this.canvas.height,i=[],a=0,l=h=0;r>h;l=h+=1)for(u=c=0;o>c;u=c+=1)s=o*(l/e>>0)+(u/n>>0)<<2,i[a++]=t[s++],i[a++]=t[s++],i[a++]=t[s++],i[a++]=t[s++];return i},n.prototype._updatePixels=function(t){var n,e,i,r,a,s;for(n=(i=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)).data,e=a=0,s=t.length;s>a;e=++a)r=t[e],n[e]=r;return this.ctx.putImageData(i,0,0)},n}(),t.tm.KernelFilter=function(n){function e(t,n,e){this.radiusX=t,this.radiusY=n,this.kernel=e}var i;return r(e,n),i=t.Rectangle,e.prototype.getBounds=function(){return new i(-(this.radiusX-1),-(this.radiusY-1),2*this.radiusX-1,2*this.radiusY-1)},e.prototype.applyFilter=function(t,n,e,i,r,a,s,o){var u,l,h,c;return null==a&&(a=t),null==s&&(s=n),null==o&&(o=e),u=t.getImageData(n,e,i,r),l=u.data,h=a.createImageData(i,r),c=h.data,this.filter(i,r,l,c),a.putImageData(h,s,o),!0},e.prototype.filter=function(t,n,e,i){var r,a,s,o,u,l,h,c,p,f,d,y,m,w,N,v,_,g,E,x;for(null==i&&(i=[]),s=this.kernel,y=this.radiusX-1,m=this.radiusY-1,u=y+this.radiusX,o=m+this.radiusY,v=_=0;n>_;v=_+=1)for(N=g=0;t>g;N=g+=1){for(d=a=r=0,l=E=0;u>E;l=E+=1)for(h=x=0;o>x;h=x+=1)w=s[u*h+l],p=N-y+h,p=0>p?0:p>t-1?t-1:p,f=v-m+l,f=0>f?0:f>n-1?n-1:f,c=t*f+p<<2,d+=e[c]*w,a+=e[++c]*w,r+=e[++c]*w;c=t*v+N<<2,i[c]=255&d,i[++c]=255&a,i[++c]=255&r,i[++c]=e[c]}return i},e.prototype.clone=function(){return new e(this.radiusX,this.radiusY,this.kernel)},e.prototype.toString=function(){return"[KernelFilter]"},e}(t.Filter),t.tm.GaussianFilter=function(t){function n(t,e,i){var r,a,s,o,u,l,h,c,p,f,d,y,m;for(null==i&&(i=1),u=2*i*i,h=0,o=[],a=c=y=1-e;e>c;a=c+=1)for(r=p=m=1-t;t>p;r=p+=1)l=1/(u*Math.PI)*Math.exp(-(r*r+a*a)/u),h+=l,o.push(l);for(s=f=0,d=o.length;d>f;s=++f)o[s],o[s]/=h;n.__super__.constructor.call(this,t,e,o)}return r(n,t),n.prototype.clone=function(){var t;return t=new GaussianBlurFilter,t.kernel=this.kernel},n.prototype.toString=function(){return"[GaussianBlurFilter]"},n}(t.tm.KernelFilter),t.tm.Xor128=function(){function t(t){this.w=null!=t?t:88675123,this.x=123456789,this.y=362436069,this.z=521288629,this.w&=4294967295,this.cache=[]}return t.prototype.at=function(t){for(;t>=this.cache.length;)this.random();return this.cache[t]},t.prototype.random=function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(t^t>>8),this.cache.push(this.w),this.w},t}()}).call(this);